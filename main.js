!function(){"use strict";function e(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t);if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var t=class{constructor(e,t){var n,s,i;n=this,i=()=>this._inputList.some((e=>!e.validity.valid)),(s=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t);if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(s="_hasInvalidInput"))in n?Object.defineProperty(n,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[s]=i,this._inputSelector=e.inputSelector,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._form=t,this._inputList=[...this._form.querySelectorAll(this._inputSelector)],this._buttonElement=this._form.querySelector(this._submitButtonSelector)}resetValidation(){this._inputList.forEach((e=>{this._hideInputError(e)}))}_showInputError(e){const t=this._form.querySelector(`.${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._form.querySelector(`.${e.id}-error`);e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""}_checkInputValidity(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}toggleButtonState(){this._hasInvalidInput()?(this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1)}_setEventListeners(){this.toggleButtonState(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this.toggleButtonState()}))}))}enableValidation(){this._setEventListeners()}},n=class{constructor(e){this._popupElement=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this)}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._popupElement.addEventListener("mousedown",(e=>{(e.target.classList.contains("popup")||e.target.classList.contains("popup__close"))&&this.close()}))}open(){this._popupElement.classList.add("popup_opened"),document.addEventListener("keyup",this._handleEscClose)}close(){this._popupElement.classList.remove("popup_opened"),document.removeEventListener("keyup",this._handleEscClose)}},s=class extends n{constructor(e,t){super(e),this._handleFormSubmit=t,this._popupForm=this._popupElement.querySelector(".form"),this._popupInputs=this._popupForm.querySelectorAll(".form__input")}_getInputValues(){const e={};return this._popupInputs.forEach((t=>{e[t.name]=t.value})),e}setEventListeners(){super.setEventListeners(),this._popupForm.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues()),this.close()}))}close(){this._popupForm.reset(),super.close()}};const i={inputSelector:".form__input",inputErrorClass:"form__input_type_error",errorClass:"form__input-error_active",submitButtonSelector:".form__button",inactiveButtonClass:"form__button_disabled"},r=document.querySelector(".popup_type_edit-profile").querySelector(".form"),o=document.querySelector(".popup_type_add-card").querySelector(".form"),l=(document.querySelector(".gallery"),document.querySelector(".profile__button-edit")),a=document.querySelector(".profile__button-add"),u=document.querySelector(".form__input_content_name"),c=document.querySelector(".form__input_content_job"),p=document.querySelector("#card").content,_=t=>new class{constructor(t,n,s,i){e(this,"_handleDelete",(()=>{this._element.remove(),this._element=null})),e(this,"_handleLike",(()=>{this._likeButton.classList.toggle("card__button-like_liked")})),e(this,"_setEventListeners",(()=>{this._imageElement.addEventListener("click",(()=>this._handleImageClick(this._element))),this._likeButton.addEventListener("click",this._handleLike),this._trashButton.addEventListener("click",this._handleDelete)})),e(this,"generateCard",(()=>(this._element=this._cardSelector.querySelector(".card").cloneNode(!0),this._likeButton=this._element.querySelector(".card__button-like"),this._imageElement=this._element.querySelector(".card__image"),this._trashButton=this._element.querySelector(".card__button-trash"),this._imageElement.src=this._link,this._imageElement.alt=this._title,this._element.querySelector(".card__title").textContent=this._title,this._setEventListeners(),this._element))),this._title=t,this._link=n,this._cardSelector=s,this._handleImageClick=i}}(t.name,t.link,p,(()=>{m.open(t.name,t.link)})).generateCard(),d=new class{constructor(e,t){let{items:n,renderer:s}=e;this._items=n,this._renderer=s,this._container=document.querySelector(t)}addItem(e){const t=this._renderer(e);this._container.append(t)}prepenedItem(e){this._container.prepend(e)}renderItems(){this._items.forEach((e=>{this.addItem(e)}))}}({items:[{name:"Yosemite Valley",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{name:"Lake Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{name:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{name:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{name:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{name:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"}],renderer:e=>{const t={name:e.name,link:e.link};return _(t)}},".gallery");d.renderItems();const h=new s(".popup_type_add-card",(e=>{const t={name:e.name,link:e.link},n=_(t);d.prepenedItem(n),E.toggleButtonState()})),m=new class extends n{constructor(e){super(e),this.popUpDescription=this._popupElement.querySelector(".popup__description")}open(e,t){this.popUpDescription.textContent=e;const n=this._popupElement.querySelector(".popup__image");n.src=t,n.alt=e,super.open()}}(".popup_type_card");m.setEventListeners();const v=new class{constructor(e){let{nameSelector:t,jobSelector:n}=e;this._name=document.querySelector(t),this._job=document.querySelector(n)}getUserInfo(){return{name:this._name.textContent,job:this._job.textContent}}setUserInfo(e){let{name:t,job:n}=e;this._name.textContent=t,this._job.textContent=n}}({nameSelector:".profile__title",jobSelector:".profile__subtitle"}),y=new s(".popup_type_edit-profile",(e=>{v.setUserInfo(e)}));y.setEventListeners(),l.addEventListener("click",(()=>{const e=v.getUserInfo();var t,n;t=e.name,n=e.job,u.value=t,c.value=n,y.open(),b.resetValidation()})),h.setEventListeners(),a.addEventListener("click",(()=>{h.open(),E.resetValidation(),E.toggleButtonState()}));const b=new t(i,r);b.enableValidation();const E=new t(i,o);E.enableValidation()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoiaWNBZ0dBLE1BaEdBLE1BQ0VBLFlBQVlDLEVBQVVDLEcsWUFBYSxLLEVBd0RoQixJQUNWQyxLQUFLQyxXQUFXQyxNQUFNQyxJQUFXQSxFQUFNQyxTQUFTQyxTLGlUQXpEdEIsdUIsd0ZBQ2pDTCxLQUFLTSxlQUFpQlIsRUFBU1MsY0FDL0JQLEtBQUtRLGlCQUFtQlYsRUFBU1csZ0JBQ2pDVCxLQUFLVSxZQUFjWixFQUFTYSxXQUM1QlgsS0FBS1ksc0JBQXdCZCxFQUFTZSxxQkFDdENiLEtBQUtjLHFCQUF1QmhCLEVBQVNpQixvQkFFckNmLEtBQUtnQixNQUFRakIsRUFDYkMsS0FBS0MsV0FBYSxJQUFJRCxLQUFLZ0IsTUFBTUMsaUJBQWlCakIsS0FBS00saUJBQ3ZETixLQUFLa0IsZUFBaUJsQixLQUFLZ0IsTUFBTUcsY0FBY25CLEtBQUtZLHNCQUN0RCxDQUVBUSxrQkFDRXBCLEtBQUtDLFdBQVdvQixTQUFTbEIsSUFDdkJILEtBQUtzQixnQkFBZ0JuQixFQUFNLEdBRS9CLENBTUFvQixnQkFBZ0JDLEdBQ2QsTUFBTUMsRUFBZXpCLEtBQUtnQixNQUFNRyxjQUFlLElBQUdLLEVBQWFFLFlBQy9ERixFQUFhRyxVQUFVQyxJQUFJNUIsS0FBS1Esa0JBQ2hDaUIsRUFBYUksWUFBY0wsRUFBYU0sa0JBQ3hDTCxFQUFhRSxVQUFVQyxJQUFJNUIsS0FBS1UsWUFDbEMsQ0FNQVksZ0JBQWdCRSxHQUNkLE1BQU1DLEVBQWV6QixLQUFLZ0IsTUFBTUcsY0FBZSxJQUFHSyxFQUFhRSxZQUMvREYsRUFBYUcsVUFBVUksT0FBTy9CLEtBQUtRLGtCQUNuQ2lCLEVBQWFFLFVBQVVJLE9BQU8vQixLQUFLVSxhQUNuQ2UsRUFBYUksWUFBYyxFQUM3QixDQU1BRyxvQkFBb0JSLEdBQ2JBLEVBQWFwQixTQUFTQyxNQUd6QkwsS0FBS3NCLGdCQUFnQkUsR0FGckJ4QixLQUFLdUIsZ0JBQWdCQyxFQUl6QixDQWFBUyxvQkFDTWpDLEtBQUtrQyxvQkFDUGxDLEtBQUtrQixlQUFlUyxVQUFVQyxJQUFJNUIsS0FBS2Msc0JBQ3ZDZCxLQUFLa0IsZUFBZWlCLFVBQVcsSUFFL0JuQyxLQUFLa0IsZUFBZVMsVUFBVUksT0FBTy9CLEtBQUtjLHNCQUMxQ2QsS0FBS2tCLGVBQWVpQixVQUFXLEVBRW5DLENBS0FDLHFCQUNFcEMsS0FBS2lDLG9CQUVMakMsS0FBS0MsV0FBV29CLFNBQVNHLElBQ3ZCQSxFQUFhYSxpQkFBaUIsU0FBUyxLQUNyQ3JDLEtBQUtnQyxvQkFBb0JSLEdBQ3pCeEIsS0FBS2lDLG1CQUFtQixHQUN4QixHQUVOLENBS0FLLG1CQUNFdEMsS0FBS29DLG9CQUNQLEdDM0RGLEVBbENBLE1BQ0l2QyxZQUFZMEMsR0FDUnZDLEtBQUt3QyxjQUFnQkMsU0FBU3RCLGNBQWNvQixHQUM1Q3ZDLEtBQUswQyxnQkFBa0IxQyxLQUFLMEMsZ0JBQWdCQyxLQUFLM0MsS0FDckQsQ0FFQTBDLGdCQUFnQkUsR0FDSSxXQUFaQSxFQUFJQyxLQUNKN0MsS0FBSzhDLE9BRWIsQ0FFQUMsb0JBQ0kvQyxLQUFLd0MsY0FBY0gsaUJBQWlCLGFBQWNPLEtBRTFDQSxFQUFJSSxPQUFPckIsVUFBVXNCLFNBQVMsVUFDOUJMLEVBQUlJLE9BQU9yQixVQUFVc0IsU0FBUyxrQkFFOUJqRCxLQUFLOEMsT0FDVCxHQUVSLENBRUFJLE9BQ0lsRCxLQUFLd0MsY0FBY2IsVUFBVUMsSUFBSSxnQkFDakNhLFNBQVNKLGlCQUFpQixRQUFTckMsS0FBSzBDLGdCQUM1QyxDQUVBSSxRQUNJOUMsS0FBS3dDLGNBQWNiLFVBQVVJLE9BQU8sZ0JBQ3BDVSxTQUFTVSxvQkFBb0IsUUFBU25ELEtBQUswQyxnQkFDL0MsR0NLSixFQWxDQSxjQUE0QlUsRUFDeEJ2RCxZQUFZMEMsRUFBZWMsR0FDdkJDLE1BQU1mLEdBRU52QyxLQUFLdUQsa0JBQW9CRixFQUN6QnJELEtBQUt3RCxXQUFheEQsS0FBS3dDLGNBQWNyQixjQUFjLFNBQ25EbkIsS0FBS3lELGFBQWV6RCxLQUFLd0QsV0FBV3ZDLGlCQUFpQixlQUN6RCxDQUVBeUMsa0JBQ0ksTUFBTUMsRUFBYyxDQUFDLEVBTXJCLE9BSkEzRCxLQUFLeUQsYUFBYXBDLFNBQVNsQixJQUN2QndELEVBQVl4RCxFQUFNeUQsTUFBUXpELEVBQU0wRCxLQUFLLElBR2xDRixDQUNYLENBRUFaLG9CQUNJTyxNQUFNUCxvQkFDTi9DLEtBQUt3RCxXQUFXbkIsaUJBQWlCLFVBQVd5QixJQUN4Q0EsRUFBRUMsaUJBQ0YvRCxLQUFLdUQsa0JBQWtCdkQsS0FBSzBELG1CQUM1QjFELEtBQUs4QyxPQUFPLEdBRXBCLENBRUFBLFFBQ0k5QyxLQUFLd0QsV0FBV1EsUUFDaEJWLE1BQU1SLE9BQ1YsR0NoQ0osTUFBTW1CLEVBQWdCLENBQ2xCMUQsY0FBZSxlQUNmRSxnQkFBaUIseUJBQ2pCRSxXQUFZLDJCQUNaRSxxQkFBc0IsZ0JBQ3RCRSxvQkFBcUIseUJDTW5CbUQsRUFEbUJ6QixTQUFTdEIsY0FBYyw0QkFDUEEsY0FBYyxTQUdqRGdELEVBRGUxQixTQUFTdEIsY0FBYyx3QkFDSkEsY0FBYyxTQUtoRGlELEdBSFUzQixTQUFTdEIsY0FBYyxZQUdSc0IsU0FBU3RCLGNBQWMsMEJBQ2hEa0QsRUFBcUI1QixTQUFTdEIsY0FBYyx3QkFHNUNtRCxFQUF1QjdCLFNBQVN0QixjQUNsQyw2QkFHRW9ELEVBQXNCOUIsU0FBU3RCLGNBQWMsNEJBRTdDcUQsRUFBZS9CLFNBQVN0QixjQUFjLFNBQVNzRCxRQU8vQ0MsRUFBY0MsR0FDTCxJQ3RDZixNQUNFOUUsWUFBWStFLEVBQU9DLEVBQU1DLEVBQWNDLEdBQWtCLHdCQVV6QyxLQUNkL0UsS0FBS2dGLFNBQVNqRCxTQUNkL0IsS0FBS2dGLFNBQVcsSUFBSSxJQUNyQixzQkFLYSxLQUNaaEYsS0FBS2lGLFlBQVl0RCxVQUFVdUQsT0FBTywwQkFBMEIsSUFDN0QsNkJBS29CLEtBQ25CbEYsS0FBS21GLGNBQWM5QyxpQkFBaUIsU0FBUyxJQUN6Q3JDLEtBQUtvRixrQkFBa0JwRixLQUFLZ0YsWUFFaENoRixLQUFLaUYsWUFBWTVDLGlCQUFpQixRQUFTckMsS0FBS3FGLGFBQ2hEckYsS0FBS3NGLGFBQWFqRCxpQkFBaUIsUUFBU3JDLEtBQUt1RixjQUFjLElBQ2hFLHVCQU1jLEtBQ2J2RixLQUFLZ0YsU0FBV2hGLEtBQUt3RixjQUFjckUsY0FBYyxTQUFTc0UsV0FBVSxHQUNwRXpGLEtBQUtpRixZQUFjakYsS0FBS2dGLFNBQVM3RCxjQUFjLHNCQUMvQ25CLEtBQUttRixjQUFnQm5GLEtBQUtnRixTQUFTN0QsY0FBYyxnQkFDakRuQixLQUFLc0YsYUFBZXRGLEtBQUtnRixTQUFTN0QsY0FBYyx1QkFDaERuQixLQUFLbUYsY0FBY08sSUFBTTFGLEtBQUsyRixNQUM5QjNGLEtBQUttRixjQUFjUyxJQUFNNUYsS0FBSzZGLE9BQzlCN0YsS0FBS2dGLFNBQVM3RCxjQUFjLGdCQUFnQlUsWUFBYzdCLEtBQUs2RixPQUUvRDdGLEtBQUtvQyxxQkFFRXBDLEtBQUtnRixZQS9DWmhGLEtBQUs2RixPQUFTakIsRUFDZDVFLEtBQUsyRixNQUFRZCxFQUNiN0UsS0FBS3dGLGNBQWdCVixFQUNyQjlFLEtBQUtvRixrQkFBb0JMLENBQzNCLEdEZ0NzQkosRUFBV2YsS0FBTWUsRUFBV0UsS0FBTUwsR0FBYyxLQUNwRXNCLEVBQVc1QyxLQUFLeUIsRUFBV2YsS0FBTWUsRUFBV0UsS0FBSyxJQUV2Q2tCLGVBR1JDLEVBQVEsSUU1Q0MsTUFDWG5HLFlBQVksRUFBcUJvRyxHQUFtQixJQUF4QyxNQUFFQyxFQUFLLFNBQUVDLEdBQVUsRUFDM0JuRyxLQUFLb0csT0FBU0YsRUFDZGxHLEtBQUtxRyxVQUFZRixFQUVqQm5HLEtBQUtzRyxXQUFhN0QsU0FBU3RCLGNBQWM4RSxFQUM3QyxDQUVBTSxRQUFRQyxHQUNKLE1BQU1DLEVBQVV6RyxLQUFLcUcsVUFBVUcsR0FDL0J4RyxLQUFLc0csV0FBV0ksT0FBT0QsRUFDM0IsQ0FDQUUsYUFBYUgsR0FDVHhHLEtBQUtzRyxXQUFXTSxRQUFRSixFQUM1QixDQUVBSyxjQUNJN0csS0FBS29HLE9BQU8vRSxTQUFTbUYsSUFDakJ4RyxLQUFLdUcsUUFBUUMsRUFBSyxHQUUxQixHRnlCQSxDQUNFTixNRHJDZ0IsQ0FDbEIsQ0FDSXRDLEtBQU0sa0JBQ05pQixLQUFNLG9EQUVWLENBQ0lqQixLQUFNLGNBQ05pQixLQUFNLHVEQUVWLENBQ0lqQixLQUFNLGlCQUNOaUIsS0FBTSwwREFFVixDQUNJakIsS0FBTSxVQUNOaUIsS0FBTSxtREFFVixDQUNJakIsS0FBTSx3QkFDTmlCLEtBQU0sbURBRVYsQ0FDSWpCLEtBQU0saUJBQ05pQixLQUFNLGlEQ2VSc0IsU0FBV1csSUFDVCxNQUFNQyxFQUFZLENBQ2hCbkQsS0FBTWtELEVBQUtsRCxLQUNYaUIsS0FBTWlDLEVBQUtqQyxNQUdiLE9BRG9CSCxFQUFXcUMsRUFDYixHQUd0QixZQUVKZixFQUFNYSxjQUVOLE1BQU1HLEVBQWtCLElBQUlDLEVBQWMsd0JBQXlCSCxJQUNqRSxNQUFNQyxFQUFZLENBQ2hCbkQsS0FBTWtELEVBQUtsRCxLQUNYaUIsS0FBTWlDLEVBQUtqQyxNQUVQcUMsRUFBY3hDLEVBQVdxQyxHQUMvQmYsRUFBTVcsYUFBYU8sR0FDbkJDLEVBQXNCbEYsbUJBQW1CLElBR3JDNkQsRUFBYSxJR3BFbkIsY0FBNkIxQyxFQUN6QnZELFlBQVkwQyxHQUNSZSxNQUFNZixHQUNOdkMsS0FBS29ILGlCQUFtQnBILEtBQUt3QyxjQUFjckIsY0FDdkMsc0JBRVIsQ0FDQStCLEtBQUtVLEVBQU1pQixHQUNQN0UsS0FBS29ILGlCQUFpQnZGLFlBQWMrQixFQUNwQyxNQUFNeUQsRUFBUXJILEtBQUt3QyxjQUFjckIsY0FBYyxpQkFDL0NrRyxFQUFNM0IsSUFBTWIsRUFDWndDLEVBQU16QixJQUFNaEMsRUFDWk4sTUFBTUosTUFDVixHSHVEa0Msb0JBQ3RDNEMsRUFBVy9DLG9CQU9YLE1BS011RSxFQUFXLElJbkZqQixNQUNJekgsWUFBWSxHQUErQixJQUEvQixhQUFFMEgsRUFBWSxZQUFFQyxHQUFhLEVBQ3JDeEgsS0FBS3lILE1BQVFoRixTQUFTdEIsY0FBY29HLEdBQ3BDdkgsS0FBSzBILEtBQU9qRixTQUFTdEIsY0FBY3FHLEVBQ3ZDLENBRUFHLGNBQ0ksTUFBTyxDQUNIL0QsS0FBTTVELEtBQUt5SCxNQUFNNUYsWUFDakIrRixJQUFLNUgsS0FBSzBILEtBQUs3RixZQUV2QixDQUVBZ0csWUFBWSxHQUFlLElBQWYsS0FBRWpFLEVBQUksSUFBRWdFLEdBQUssRUFDckI1SCxLQUFLeUgsTUFBTTVGLFlBQWMrQixFQUN6QjVELEtBQUswSCxLQUFLN0YsWUFBYytGLENBQzVCLEdKbUUwQixDQUM1QkwsYUFBYyxrQkFDZEMsWUFBYSx1QkFHVE0sRUFBWSxJQUFJYixFQUFjLDRCQUE2QkgsSUFDL0RRLEVBQVNPLFlBQVlmLEVBQUssSUFFNUJnQixFQUFVL0Usb0JBRVZxQixFQUF1Qi9CLGlCQUFpQixTQUFTLEtBQy9DLE1BQU15RSxFQUFPUSxFQUFTSyxjQWhCSSxJQUFDL0QsRUFBTWdFLEVBQU5oRSxFQWlCUGtELEVBQUtsRCxLQWpCUWdFLEVBaUJGZCxFQUFLYyxJQWhCcEN0RCxFQUFxQlQsTUFBUUQsRUFDN0JXLEVBQW9CVixNQUFRK0QsRUFnQjVCRSxFQUFVNUUsT0FDVjZFLEVBQXlCM0csaUJBQWlCLElBRzVDNEYsRUFBZ0JqRSxvQkFFaEJzQixFQUFtQmhDLGlCQUFpQixTQUFTLEtBQzNDMkUsRUFBZ0I5RCxPQUNoQmlFLEVBQXNCL0Ysa0JBQ3RCK0YsRUFBc0JsRixtQkFBbUIsSUFJM0MsTUFBTThGLEVBQTJCLElBQUlDLEVBQ2pDL0QsRUFDQUMsR0FFSjZELEVBQXlCekYsbUJBQ3pCLE1BQU02RSxFQUF3QixJQUFJYSxFQUM5Qi9ELEVBQ0FFLEdBRUpnRCxFQUFzQjdFLGtCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvc2NyaXB0cy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybUVsZW1lbnQpIHtcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gc2V0dGluZ3MuaW5wdXRTZWxlY3RvcjtcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3M7XG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IHNldHRpbmdzLmVycm9yQ2xhc3M7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcztcblxuICAgIHRoaXMuX2Zvcm0gPSBmb3JtRWxlbWVudDtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBbLi4udGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXTtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgfVxuXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTaG93IGVycm9yXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBpbnB1dEVsZW1lbnRcbiAgICovXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBoaWRlIGVycm9yXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBpbnB1dEVsZW1lbnRcbiAgICovXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XG4gIH1cblxuICAvKipcbiAgICogc2hvdyBvciBoaWRlIGVycm9yXG4gICAqIEBwYXJhbSB7b2JqZWN0fSBpbnB1dEVsZW1lbnRcbiAgICovXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIGNoZWNraW5nIGFsbCBmaWVsZHMgZm9yIHZhbGlkaXR5XG4gICAqIEByZXR1cm5zIGJvb2xlYW5cbiAgICovXG4gIF9oYXNJbnZhbGlkSW5wdXQgPSAoKSA9PiB7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dCkgPT4gIWlucHV0LnZhbGlkaXR5LnZhbGlkKTtcbiAgfTtcblxuICAvKipcbiAgICogdG9vZ2xlIGJ1dHRvbiBzdGF0ZVxuICAgKi9cbiAgdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCgpKSB7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBzZXQgYWxsIGxpc3RlbmVycyBvbiB0aGUgY2FyZFxuICAgKi9cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcblxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogc3RhcnQgdmFsaWRhdGlvblxuICAgKi9cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3I7IiwiY2xhc3MgUG9wdXAge1xuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICAgICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xuICAgIH1cblxuICAgIF9oYW5kbGVFc2NDbG9zZShldnQpIHtcbiAgICAgICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZXZ0KSA9PiB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cFwiKSB8fFxuICAgICAgICAgICAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBfX2Nsb3NlXCIpXG4gICAgICAgICAgICApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIG9wZW4oKSB7XG4gICAgICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwicG9wdXBfb3BlbmVkXCIpO1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICAgIH1cblxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX29wZW5lZFwiKTtcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBvcHVwOyIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cFwiO1xuXG5jbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcbiAgICAgICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG5cbiAgICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gICAgICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1cIik7XG4gICAgICAgIHRoaXMuX3BvcHVwSW5wdXRzID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZm9ybV9faW5wdXRcIik7XG4gICAgfVxuXG4gICAgX2dldElucHV0VmFsdWVzKCkge1xuICAgICAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHt9O1xuXG4gICAgICAgIHRoaXMuX3BvcHVwSW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICAgICAgICBpbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gaW5wdXRWYWx1ZXM7XG4gICAgfVxuXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChlKSA9PiB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7XG4gICAgICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhGb3JtOyIsIlxuY29uc3QgY29uZmlnQ2xhc3NlcyA9IHtcbiAgICBpbnB1dFNlbGVjdG9yOiBcIi5mb3JtX19pbnB1dFwiLFxuICAgIGlucHV0RXJyb3JDbGFzczogXCJmb3JtX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gICAgZXJyb3JDbGFzczogXCJmb3JtX19pbnB1dC1lcnJvcl9hY3RpdmVcIixcbiAgICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIuZm9ybV9fYnV0dG9uXCIsXG4gICAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJmb3JtX19idXR0b25fZGlzYWJsZWRcIixcbn07XG5cbiBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gICAge1xuICAgICAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxuICAgICAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3lvc2VtaXRlLmpwZ1wiLFxuICAgIH0sXG4gICAge1xuICAgICAgICBuYW1lOiBcIkxha2UgTG91aXNlXCIsXG4gICAgICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFrZS1sb3Vpc2UuanBnXCIsXG4gICAgfSxcbiAgICB7XG4gICAgICAgIG5hbWU6IFwiQmFsZCBNb3VudGFpbnNcIixcbiAgICAgICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9iYWxkLW1vdW50YWlucy5qcGdcIixcbiAgICB9LFxuICAgIHtcbiAgICAgICAgbmFtZTogXCJMYXRlbWFyXCIsXG4gICAgICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGF0ZW1hci5qcGdcIixcbiAgICB9LFxuICAgIHtcbiAgICAgICAgbmFtZTogXCJWYW5vaXNlIE5hdGlvbmFsIFBhcmtcIixcbiAgICAgICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS92YW5vaXNlLmpwZ1wiLFxuICAgIH0sXG4gICAge1xuICAgICAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXG4gICAgICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFnby5qcGdcIixcbiAgICB9LFxuXTtcblxuZXhwb3J0IHsgY29uZmlnQ2xhc3NlcywgaW5pdGlhbENhcmRzIH07IiwiaW1wb3J0IFwiLi4vcGFnZXMvaW5kZXguY3NzXCI7XG5cbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmRcIjtcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3JcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb25cIjtcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZVwiO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybVwiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5pbXBvcnQgeyBjb25maWdDbGFzc2VzLCBpbml0aWFsQ2FyZHMgfSBmcm9tIFwiLi4vc2NyaXB0cy91dGlscy9jb25zdGFudHNcIjtcblxuLy9XcmFwcGVyc1xuY29uc3QgZWRpdFByb2ZpbGVNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfdHlwZV9lZGl0LXByb2ZpbGVcIik7XG5jb25zdCBlZGl0Rm9ybUVsZW1lbnQgPSBlZGl0UHJvZmlsZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybVwiKTtcblxuY29uc3QgYWRkQ2FyZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF90eXBlX2FkZC1jYXJkXCIpO1xuY29uc3QgYWRkQ2FyZEZvcm1FbGVtZW50ID0gYWRkQ2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybVwiKTtcblxuY29uc3QgZ2FsbGVyeSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ2FsbGVyeVwiKTtcblxuLy9CdXR0b25zXG5jb25zdCBlZGl0UHJvZmlsZU1vZGFsQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19idXR0b24tZWRpdFwiKTtcbmNvbnN0IGFkZENhcmRNb2RhbEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYnV0dG9uLWFkZFwiKTtcblxuLy9JbnB1dHNcbmNvbnN0IG5hbWVFZGl0UHJvZmlsZUlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICBcIi5mb3JtX19pbnB1dF9jb250ZW50X25hbWVcIlxuKTtcblxuY29uc3Qgam9iRWRpdFByb2ZpbGVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybV9faW5wdXRfY29udGVudF9qb2JcIik7XG5cbmNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZFwiKS5jb250ZW50O1xuXG4vKipcbiAqIEdlbmVyYXRlIG5ldyBjYXJkXG4gKiBAcGFyYW0ge09iamVjdH0gY2FyZE9iamVjdFxuICogQHJldHVybnMgT2JqZWN0XG4gKi9cbmNvbnN0IGNyZWF0ZUNhcmQgPSAoY2FyZE9iamVjdCkgPT4ge1xuICBjb25zdCBjYXJkID0gbmV3IENhcmQoY2FyZE9iamVjdC5uYW1lLCBjYXJkT2JqZWN0LmxpbmssIGNhcmRUZW1wbGF0ZSwgKCkgPT4ge1xuICAgIGltYWdlTW9kYWwub3BlbihjYXJkT2JqZWN0Lm5hbWUsIGNhcmRPYmplY3QubGluayk7XG4gIH0pO1xuICByZXR1cm4gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcbn07XG5cbmNvbnN0IGNhcmRzID0gbmV3IFNlY3Rpb24oXG4gICAge1xuICAgICAgaXRlbXM6IGluaXRpYWxDYXJkcyxcbiAgICAgIHJlbmRlcmVyOiAoZGF0YSkgPT4ge1xuICAgICAgICBjb25zdCBjYXJkSW5wdXQgPSB7XG4gICAgICAgICAgbmFtZTogZGF0YS5uYW1lLFxuICAgICAgICAgIGxpbms6IGRhdGEubGluayxcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKGNhcmRJbnB1dCk7XG4gICAgICAgIHJldHVybiBjYXJkRWxlbWVudDtcbiAgICAgIH0sXG4gICAgfSxcbiAgICBcIi5nYWxsZXJ5XCJcbik7XG5jYXJkcy5yZW5kZXJJdGVtcygpO1xuXG5jb25zdCBhZGROZXdDYXJkTW9kYWwgPSBuZXcgUG9wdXBXaXRoRm9ybShcIi5wb3B1cF90eXBlX2FkZC1jYXJkXCIsIChkYXRhKSA9PiB7XG4gIGNvbnN0IGNhcmRJbnB1dCA9IHtcbiAgICBuYW1lOiBkYXRhLm5hbWUsXG4gICAgbGluazogZGF0YS5saW5rLFxuICB9O1xuICBjb25zdCBjYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmQoY2FyZElucHV0KTtcbiAgY2FyZHMucHJlcGVuZWRJdGVtKGNhcmRFbGVtZW50KTtcbiAgYWRkQ2FyZEZvcm1WYWxpZGF0aW9uLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XG59KTtcblxuY29uc3QgaW1hZ2VNb2RhbCA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIi5wb3B1cF90eXBlX2NhcmRcIik7XG5pbWFnZU1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8qKlxuICogRmlsbCBkYXRhIGluIGVkaXRQcm9maWxlTW9ja3VwXG4gKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICogQHBhcmFtIHtzdHJpbmd9IGpvYlxuICovXG5jb25zdCBmaWxsRWRpdFByb2ZpbGVGb3JtID0gKG5hbWUsIGpvYikgPT4ge1xuICBuYW1lRWRpdFByb2ZpbGVJbnB1dC52YWx1ZSA9IG5hbWU7XG4gIGpvYkVkaXRQcm9maWxlSW5wdXQudmFsdWUgPSBqb2I7XG59O1xuXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XG4gIG5hbWVTZWxlY3RvcjogXCIucHJvZmlsZV9fdGl0bGVcIixcbiAgam9iU2VsZWN0b3I6IFwiLnByb2ZpbGVfX3N1YnRpdGxlXCIsXG59KTtcblxuY29uc3QgZWRpdE1vZGFsID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIucG9wdXBfdHlwZV9lZGl0LXByb2ZpbGVcIiwgKGRhdGEpID0+IHtcbiAgdXNlckluZm8uc2V0VXNlckluZm8oZGF0YSk7XG59KTtcbmVkaXRNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5lZGl0UHJvZmlsZU1vZGFsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGNvbnN0IGRhdGEgPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuICBmaWxsRWRpdFByb2ZpbGVGb3JtKGRhdGEubmFtZSwgZGF0YS5qb2IpO1xuICBlZGl0TW9kYWwub3BlbigpO1xuICBlZGl0UHJvZmlsZUZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XG59KTtcblxuYWRkTmV3Q2FyZE1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmFkZENhcmRNb2RhbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBhZGROZXdDYXJkTW9kYWwub3BlbigpO1xuICBhZGRDYXJkRm9ybVZhbGlkYXRpb24ucmVzZXRWYWxpZGF0aW9uKCk7XG4gIGFkZENhcmRGb3JtVmFsaWRhdGlvbi50b2dnbGVCdXR0b25TdGF0ZSgpO1xufSk7XG5cbi8vIFZhbGlkYXRpb25cbmNvbnN0IGVkaXRQcm9maWxlRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKFxuICAgIGNvbmZpZ0NsYXNzZXMsXG4gICAgZWRpdEZvcm1FbGVtZW50XG4pO1xuZWRpdFByb2ZpbGVGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbmNvbnN0IGFkZENhcmRGb3JtVmFsaWRhdGlvbiA9IG5ldyBGb3JtVmFsaWRhdG9yKFxuICAgIGNvbmZpZ0NsYXNzZXMsXG4gICAgYWRkQ2FyZEZvcm1FbGVtZW50XG4pO1xuYWRkQ2FyZEZvcm1WYWxpZGF0aW9uLmVuYWJsZVZhbGlkYXRpb24oKTtcbiIsImNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3Rvcih0aXRsZSwgbGluaywgY2FyZFNlbGVjdG9yLCBoYW5kbGVJbWFnZUNsaWNrKSB7XG4gICAgdGhpcy5fdGl0bGUgPSB0aXRsZTtcbiAgICB0aGlzLl9saW5rID0gbGluaztcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XG4gICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayA9IGhhbmRsZUltYWdlQ2xpY2s7XG4gIH1cblxuICAvKipcbiAgICogcmVtb3ZlIGNhcmRcbiAgICovXG4gIF9oYW5kbGVEZWxldGUgPSAoKSA9PiB7XG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcbiAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcbiAgfTtcblxuICAvKipcbiAgICogdG9nZ2xlIGxpa2UgYnV0dG9uXG4gICAqL1xuICBfaGFuZGxlTGlrZSA9ICgpID0+IHtcbiAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19idXR0b24tbGlrZV9saWtlZFwiKTtcbiAgfTtcblxuICAvKipcbiAgICogc2V0IGFsbCBsaXN0ZW5lcnMgb24gdGhlIGNhcmRcbiAgICovXG4gIF9zZXRFdmVudExpc3RlbmVycyA9ICgpID0+IHtcbiAgICB0aGlzLl9pbWFnZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+XG4gICAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sodGhpcy5fZWxlbWVudClcbiAgICApO1xuICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZUxpa2UpO1xuICAgIHRoaXMuX3RyYXNoQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVEZWxldGUpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBuZXcgZWxlbWVudCB3aXRoIGNhcmQgYnkgdGVtcGxhdGVcbiAgICogQHJldHVybnMgb2JqZWN0XG4gICAqL1xuICBnZW5lcmF0ZUNhcmQgPSAoKSA9PiB7XG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2NhcmRTZWxlY3Rvci5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIikuY2xvbmVOb2RlKHRydWUpO1xuICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fYnV0dG9uLWxpa2VcIik7XG4gICAgdGhpcy5faW1hZ2VFbGVtZW50ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xuICAgIHRoaXMuX3RyYXNoQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2J1dHRvbi10cmFzaFwiKTtcbiAgICB0aGlzLl9pbWFnZUVsZW1lbnQuc3JjID0gdGhpcy5fbGluaztcbiAgICB0aGlzLl9pbWFnZUVsZW1lbnQuYWx0ID0gdGhpcy5fdGl0bGU7XG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpLnRleHRDb250ZW50ID0gdGhpcy5fdGl0bGU7XG5cbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IENhcmQ7IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gICAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICAgICAgdGhpcy5faXRlbXMgPSBpdGVtcztcbiAgICAgICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcblxuICAgICAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcbiAgICB9XG5cbiAgICBhZGRJdGVtKGl0ZW0pIHtcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xuICAgICAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kKGVsZW1lbnQpO1xuICAgIH1cbiAgICBwcmVwZW5lZEl0ZW0oaXRlbSkge1xuICAgICAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChpdGVtKTtcbiAgICB9XG5cbiAgICByZW5kZXJJdGVtcygpIHtcbiAgICAgICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5hZGRJdGVtKGl0ZW0pO1xuICAgICAgICB9KTtcbiAgICB9XG59IiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwXCI7XG5cbmNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICAgIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICAgICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgICAgIHRoaXMucG9wVXBEZXNjcmlwdGlvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgICAgICAgXCIucG9wdXBfX2Rlc2NyaXB0aW9uXCJcbiAgICAgICAgKTtcbiAgICB9XG4gICAgb3BlbihuYW1lLCBsaW5rKSB7XG4gICAgICAgIHRoaXMucG9wVXBEZXNjcmlwdGlvbi50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgICAgIGNvbnN0IGltYWdlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlXCIpO1xuICAgICAgICBpbWFnZS5zcmMgPSBsaW5rO1xuICAgICAgICBpbWFnZS5hbHQgPSBuYW1lO1xuICAgICAgICBzdXBlci5vcGVuKCk7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhJbWFnZTsiLCJjbGFzcyBVc2VySW5mbyB7XG4gICAgY29uc3RydWN0b3IoeyBuYW1lU2VsZWN0b3IsIGpvYlNlbGVjdG9yIH0pIHtcbiAgICAgICAgdGhpcy5fbmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcbiAgICAgICAgdGhpcy5fam9iID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihqb2JTZWxlY3Rvcik7XG4gICAgfVxuXG4gICAgZ2V0VXNlckluZm8oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBuYW1lOiB0aGlzLl9uYW1lLnRleHRDb250ZW50LFxuICAgICAgICAgICAgam9iOiB0aGlzLl9qb2IudGV4dENvbnRlbnQsXG4gICAgICAgIH07XG4gICAgfVxuXG4gICAgc2V0VXNlckluZm8oeyBuYW1lLCBqb2IgfSkge1xuICAgICAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICAgICAgdGhpcy5fam9iLnRleHRDb250ZW50ID0gam9iO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgVXNlckluZm87Il0sIm5hbWVzIjpbImNvbnN0cnVjdG9yIiwic2V0dGluZ3MiLCJmb3JtRWxlbWVudCIsInRoaXMiLCJfaW5wdXRMaXN0Iiwic29tZSIsImlucHV0IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9mb3JtIiwicXVlcnlTZWxlY3RvckFsbCIsIl9idXR0b25FbGVtZW50IiwicXVlcnlTZWxlY3RvciIsInJlc2V0VmFsaWRhdGlvbiIsImZvckVhY2giLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dEVsZW1lbnQiLCJlcnJvckVsZW1lbnQiLCJpZCIsImNsYXNzTGlzdCIsImFkZCIsInRleHRDb250ZW50IiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJyZW1vdmUiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJfaGFzSW52YWxpZElucHV0IiwiZGlzYWJsZWQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJhZGRFdmVudExpc3RlbmVyIiwiZW5hYmxlVmFsaWRhdGlvbiIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiZG9jdW1lbnQiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwiZXZ0Iiwia2V5IiwiY2xvc2UiLCJzZXRFdmVudExpc3RlbmVycyIsInRhcmdldCIsImNvbnRhaW5zIiwib3BlbiIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJQb3B1cCIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX3BvcHVwRm9ybSIsIl9wb3B1cElucHV0cyIsIl9nZXRJbnB1dFZhbHVlcyIsImlucHV0VmFsdWVzIiwibmFtZSIsInZhbHVlIiwiZSIsInByZXZlbnREZWZhdWx0IiwicmVzZXQiLCJjb25maWdDbGFzc2VzIiwiZWRpdEZvcm1FbGVtZW50IiwiYWRkQ2FyZEZvcm1FbGVtZW50IiwiZWRpdFByb2ZpbGVNb2RhbEJ1dHRvbiIsImFkZENhcmRNb2RhbEJ1dHRvbiIsIm5hbWVFZGl0UHJvZmlsZUlucHV0Iiwiam9iRWRpdFByb2ZpbGVJbnB1dCIsImNhcmRUZW1wbGF0ZSIsImNvbnRlbnQiLCJjcmVhdGVDYXJkIiwiY2FyZE9iamVjdCIsInRpdGxlIiwibGluayIsImNhcmRTZWxlY3RvciIsImhhbmRsZUltYWdlQ2xpY2siLCJfZWxlbWVudCIsIl9saWtlQnV0dG9uIiwidG9nZ2xlIiwiX2ltYWdlRWxlbWVudCIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2hhbmRsZUxpa2UiLCJfdHJhc2hCdXR0b24iLCJfaGFuZGxlRGVsZXRlIiwiX2NhcmRTZWxlY3RvciIsImNsb25lTm9kZSIsInNyYyIsIl9saW5rIiwiYWx0IiwiX3RpdGxlIiwiaW1hZ2VNb2RhbCIsImdlbmVyYXRlQ2FyZCIsImNhcmRzIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsImFkZEl0ZW0iLCJpdGVtIiwiZWxlbWVudCIsImFwcGVuZCIsInByZXBlbmVkSXRlbSIsInByZXBlbmQiLCJyZW5kZXJJdGVtcyIsImRhdGEiLCJjYXJkSW5wdXQiLCJhZGROZXdDYXJkTW9kYWwiLCJQb3B1cFdpdGhGb3JtIiwiY2FyZEVsZW1lbnQiLCJhZGRDYXJkRm9ybVZhbGlkYXRpb24iLCJwb3BVcERlc2NyaXB0aW9uIiwiaW1hZ2UiLCJ1c2VySW5mbyIsIm5hbWVTZWxlY3RvciIsImpvYlNlbGVjdG9yIiwiX25hbWUiLCJfam9iIiwiZ2V0VXNlckluZm8iLCJqb2IiLCJzZXRVc2VySW5mbyIsImVkaXRNb2RhbCIsImVkaXRQcm9maWxlRm9ybVZhbGlkYXRvciIsIkZvcm1WYWxpZGF0b3IiXSwic291cmNlUm9vdCI6IiJ9